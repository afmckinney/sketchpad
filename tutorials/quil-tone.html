
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>quil-tone - SketchPad</title>
  <meta name="author" content="">

  
  <meta name="description" content="Quil-tone Working with projects The SketchPad project system is based on Leiningen and Clojars. Leiningen is integrated into the application as a &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ghostandthemachine.github.com/sketchpad/tutorials/quil-tone.html">
  <link href="/sketchpad/favicon.png" rel="icon">
  <link href="/sketchpad/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/sketchpad/javascripts/modernizr-2.0.js"></script>
  <script src="/sketchpad/javascripts/ender.js"></script>
  <script src="/sketchpad/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/sketchpad/atom.xml" rel="alternate" title="SketchPad" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body    class="collapse-sidebar sidebar-footer" >
  <header role="banner"><a href="https://github.com/ghostandthemachine/sketchpad"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub"></a>

<hgroup>
	<table style="background-color=#333;">
		<tr style="background-color=#333;">
			<td style="background-color=#333;">
			  <h1><a href="/sketchpad/">SketchPad</a></h1>
			  
			    <h2>A Clojure IDE written in Clojure</h2>
			  
			</td>
			<td style="background-color=#333;">
				<img src="https://raw.github.com/ghostandthemachine/sketchpad/master/resources/sketchpad-lambda-logo-small.png"/>
			</td>
		</tr>
	</table>
</hgroup>


</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/sketchpad/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ghostandthemachine.github.com/sketchpad" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/sketchpad/about/">About</a></li>
  <li><a href="/sketchpad/documentation/">Domuentation</a></li>
  <li><a href="/sketchpad/tutorials/">Tutorials</a></li>
	<li><a href="/sketchpad/blog/">Blog</a></li>  
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">Quil-tone</h1>
    
  </header>
  
  <h2>Working with projects</h2>

<p>The SketchPad project system is based on <a href="https://github.com/technomancy/leiningen/">Leiningen</a> and Clojars. Leiningen is integrated into the application as a core dependency and allows SketchPad to create, build, and run Clojure projects without the need for any other libraries or system dependencies. To begin working on a project you first need to open an existing project or create a new one.</p>

<h2>Creating a project</h2>

<p>New projects can be created in a few ways:</p>

<ul>
<li>Through the file menu, <code>File -&gt; New Project...</code></li>
<li>or the file tree popup menu <code>New Project...</code></li>
<li>or from the SketchPad REPL with <code>sketchpad.user =&gt; (create-project)</code></li>
</ul>


<div style="float:right">
    <img src="https://raw.github.com/ghostandthemachine/sketchpad/master/img/quil-tone-creation-form.png"/>
</div>


<p>This will open the project setup from. The project creation form creates the new project&#8217;s <code>project.clj</code> file based on the project param fields. One handy feature incorporated into the creation form is that you can use shorthand names for dependencies available on Clojars.org. The auto completion will query Clojars.org for matching dependencies and display all available versions etc.</p>

<p>For this example we&#8217;ll use Overtone and Quil to make a simple drawing and synth example. To add the dependencies to the project, type in the name of any repo on Clojars and all available matches will be displayed in the auto completion list. Test this out by typing overtone and selecting [overtone &#8220;0.8.0-SNAPSHOT&#8221;]. You&#8217;ll see that the dependencies can be retrieved with shorthand names (<code>overtone -&gt; [overtone "0.8.0-SNAPSHOT"]</code>, <code>quil -&gt; [quil "1.6.0"]</code>). After you have added Overtone and Quil as dependencies, click ok. This will create the new project and a new <code>project.clj</code> file that looks like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='clj'><span class='line'><span class="p">(</span><span class="kd">defproject </span><span class="nv">quil-tone</span> <span class="s">&quot;0.0.1-SNAPSHOT&quot;</span>
</span><span class='line'>  <span class="ss">:description</span> <span class="s">&quot;A SketchPad tutorial project using Overtone and Quil.&quot;</span>
</span><span class='line'>  <span class="ss">:dependencies</span> <span class="p">[[</span><span class="nv">org.clojure/clojure</span> <span class="s">&quot;1.3.0&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">quil</span> <span class="s">&quot;1.6.0&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">overtone</span> <span class="s">&quot;0.8.0-SNAPSHOT&quot;</span><span class="p">]])</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Some example code</h2>

<p>With the project created it&#8217;s time to make some circles and sounds. For this example will use the basic Quil example and add a random synth noise that is fired when a new circle is drawn. Paste this code into your <code>quil_tone/src/quil_tone/quil_tone.clj</code> file.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='clj'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">quil-tone.core</span>
</span><span class='line'>  <span class="p">(</span><span class="ss">:use</span> <span class="p">[</span><span class="nv">quil.core</span><span class="p">])</span>
</span><span class='line'>  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">overtone.core</span> <span class="ss">:as</span> <span class="nv">overtone</span><span class="p">]))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nf">overtone/definst</span> <span class="nv">baz</span> <span class="p">[</span><span class="nv">freq</span> <span class="mi">440</span><span class="p">]</span> <span class="p">(</span><span class="nb">* </span><span class="mf">0.3</span> <span class="p">(</span><span class="nf">overtone/saw</span> <span class="nv">freq</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">setup</span> <span class="p">[]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">smooth</span><span class="p">)</span>                          <span class="c1">;;Turn on anti-aliasing</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">frame-rate</span> <span class="mi">1</span><span class="p">)</span>                    <span class="c1">;;Set framerate to 1 FPS</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">background</span> <span class="mi">200</span><span class="p">))</span>                 <span class="c1">;;Set the background colour to</span>
</span><span class='line'>                                    <span class="c1">;;  a nice shade of grey.</span>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">draw</span> <span class="p">[]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">stroke</span> <span class="p">(</span><span class="nf">random</span> <span class="mi">255</span><span class="p">))</span>             <span class="c1">;;Set the stroke colour to a random grey</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">stroke-weight</span> <span class="p">(</span><span class="nf">random</span> <span class="mi">10</span><span class="p">))</span>       <span class="c1">;;Set the stroke thickness randomly</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">fill</span> <span class="p">(</span><span class="nf">random</span> <span class="mi">255</span><span class="p">))</span>               <span class="c1">;;Set the fill colour to a random grey</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">diam</span> <span class="p">(</span><span class="nf">random</span> <span class="mi">100</span><span class="p">)</span>           <span class="c1">;;Set the diameter to a value between 0 and 100</span>
</span><span class='line'>        <span class="nv">x</span>    <span class="p">(</span><span class="nf">random</span> <span class="p">(</span><span class="nf">width</span><span class="p">))</span>       <span class="c1">;;Set the x coord randomly within the sketch</span>
</span><span class='line'>        <span class="nv">y</span>    <span class="p">(</span><span class="nf">random</span> <span class="p">(</span><span class="nf">height</span><span class="p">))]</span>     <span class="c1">;;Set the y coord randomly within the sketch</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">overtone/kill</span> <span class="nv">baz</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">baz</span> <span class="p">(</span><span class="nb">* </span><span class="mi">6</span> <span class="nv">diam</span><span class="p">))</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">ellipse</span> <span class="nv">x</span> <span class="nv">y</span> <span class="nv">diam</span> <span class="nv">diam</span><span class="p">)))</span>       <span class="c1">;;Draw a circle at x y with the correct diameter</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nf">defsketch</span> <span class="nv">quil-tone-example</span>                  <span class="c1">;;Define a new sketch named example</span>
</span><span class='line'>  <span class="ss">:title</span> <span class="s">&quot;Oh so many grey circles&quot;</span>  <span class="c1">;;Set the title of the sketch</span>
</span><span class='line'>  <span class="ss">:setup</span> <span class="nv">setup</span>                      <span class="c1">;;Specify the setup fn</span>
</span><span class='line'>  <span class="ss">:draw</span> <span class="nv">draw</span>                        <span class="c1">;;Specify the draw fn</span>
</span><span class='line'>  <span class="ss">:size</span> <span class="p">[</span><span class="mi">323</span> <span class="mi">200</span><span class="p">])</span>                  <span class="c1">;;You struggle to beat the golden ratio</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now let&#8217;s try it out!</p>

<h2>Opening a project REPL</h2>

<p>A REPL can be created in an outside process by right clicking a node in the new project and selecting <code>Create REPL</code>. Leiningen and Pomegranate will download all required dependencies and the new nREPL will be loaded into a new tab. Once the new tab is loaded you can navigate to the previous and next tabs with the key commands <code>meta alt UP</code> for the next REPL tab and <code>meta alt DOWN</code> for the previous tab.</p>

<p>With the new properly classpathed and loaded REPL we can now boot the Overtone server awe struck by our amazing art.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clj'><span class='line'><span class="c1">;; boot the server</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">use</span> <span class="ss">&#39;overtone.live</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Wait for Overtone server to load&#8230;</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clj'><span class='line'><span class="c1">;; listen to the joys of a simple sine wave</span>
</span><span class='line'><span class="nv">user=&gt;</span> <span class="p">(</span><span class="nf">use</span> <span class="ss">&#39;quil-tone.core</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>You should now see the Quil panel with circles being drawn and random synths!</p>

  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://ghostandthemachine.github.com/sketchpad/tutorials/quil-tone.html" data-via="" data-counturl="http://ghostandthemachine.github.com/sketchpad/tutorials/quil-tone.html" >Tweet</a>
  
  
  
</div>

      
    </footer>
  
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/sketchpad/blog/2012/08/18/project-end/">Project End</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 -  -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
